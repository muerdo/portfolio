<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Falsa Sensa√ß√£o de Seguran√ßa: O Erro Comum que Derruba Aplica√ß√µes Supabase | RedRecon Blog</title>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .blog-header {
            border-bottom: 2px solid var(--neon-red);
            padding-bottom: 20px;
            margin-bottom: 40px;
        }

        .blog-header h1 {
            color: white;
            font-size: 2.2rem;
            margin-bottom: 15px;
            line-height: 1.3;
        }

        .highlight-box {
            background: rgba(255, 42, 42, 0.05);
            border-left: 4px solid var(--neon-red);
            padding: 20px;
            margin: 30px 0;
            color: #ddd;
        }

        .highlight-box.success {
            border-left-color: var(--neon-green);
            background: rgba(0, 255, 65, 0.05);
        }

        .highlight-box.warning {
            border-left-color: var(--neon-cyan);
            background: rgba(0, 243, 255, 0.05);
        }

        .nav-back {
            margin-bottom: 30px;
            font-family: var(--font-code);
        }

        .nav-back a {
            text-decoration: none;
            color: var(--text-muted);
        }

        .nav-back a:hover {
            color: var(--neon-cyan);
        }

        h2 {
            color: var(--neon-green);
            margin-top: 40px;
            border-bottom: 1px solid var(--border-dim);
            padding-bottom: 10px;
        }

        h3 {
            color: white;
            margin-top: 30px;
            font-size: 1.3rem;
        }

        p {
            color: var(--text-primary);
            line-height: 1.8;
            margin-bottom: 1.2rem;
        }

        ul {
            margin-bottom: 20px;
            padding-left: 20px;
            color: var(--text-muted);
        }

        li {
            margin-bottom: 12px;
            line-height: 1.6;
        }

        strong {
            color: var(--neon-cyan);
        }

        pre {
            background-color: #000;
            border: 1px solid var(--border-dim);
            border-left: 3px solid var(--neon-cyan);
            padding: 1.5rem;
            overflow-x: auto;
            margin: 20px 0;
            font-family: var(--font-code);
        }

        code {
            color: var(--neon-cyan);
            font-family: var(--font-code);
            background: rgba(255, 255, 255, 0.05);
            padding: 2px 5px;
            border-radius: 3px;
        }

        pre code {
            background: none;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            font-size: 0.95rem;
        }

        th,
        td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-dim);
            color: var(--text-primary);
        }

        th {
            color: var(--neon-green);
            font-family: var(--font-code);
            text-transform: uppercase;
            letter-spacing: 1px;
            background-color: rgba(255, 255, 255, 0.03);
        }
    </style>
</head>

<body class="hacker-mode">

    <nav class="top-nav">
        <div class="logo" style="display:flex; align-items:center; gap:10px;">
            <img src="../img/redsec_alliance.png" alt="RedSec Logo" style="height:40px; width:auto;">
            <div style="display:flex; flex-direction:column; line-height:1.1;">
                <span class="user-name" style="font-size:1.2rem; letter-spacing:1px;">REDSEC INTELLIGENCE</span>
                <span class="role" style="font-size:0.7rem; color:var(--text-muted);">OFFENSIVE SECURITY RESEARCH</span>
            </div>
        </div>
        <div class="controls">
            <div class="toggle-group" style="margin-right: 15px;">
                <span class="lang-opt active" data-lang="pt"
                    style="cursor:pointer; opacity:1.0; font-size:1.2rem; margin-right:5px;">üáßüá∑</span>
                <span class="lang-opt" data-lang="en"
                    style="cursor:pointer; opacity:0.4; font-size:1.2rem; margin-right:5px;">üá∫üá∏</span>
            </div>
            <div class="toggle-group">
                <button id="theme-toggle" class="btn-toggle">MODO_HACKER</button>
            </div>
            <div class="nav-links">
                <a href="../index.html">DASHBOARD</a>
                <a href="../library.html">BIBLIOTECA</a>
                <a href="../blog.html">BLOG</a>
                <a href="../profile.html" data-i18n="nav_about">PERFIL</a>
            </div>
        </div>
    </nav>

    <div class="main-container" style="max-width: 900px;">

        <div class="nav-back">
            <a href="../blog.html">‚Üê VOLTAR PARA O BLOG</a>
        </div>

        <article>
            <header class="blog-header">
                <h1>üö® A Falsa Sensa√ß√£o de Seguran√ßa: O Erro Comum de 15 Minutos que Derruba Aplica√ß√µes Supabase</h1>
                <div style="color:var(--text-muted); font-family:var(--font-code); font-size:0.9rem;">
                    <strong>T√ìPICO:</strong> CLOUD SEC // <strong>LEITURA:</strong> 8 MIN // <span
                        style="color:var(--neon-red);">CRITICAL</span>
                </div>
            </header>

            <section>
                <p>Voc√™ escolheu o Supabase para construir seu pr√≥ximo grande projeto. √â r√°pido, tem um UX incr√≠vel, e a
                    promessa √© tentadora: "Bancos de dados com superpoderes". Mas e se eu dissesse que, com apenas
                    <strong>uma requisi√ß√£o HTTP desautorizada</strong>, um atacante pode roubar toda a receita da sua
                    loja?
                </p>

                <div class="highlight-box">
                    <p style="margin:0;">Recentemente, um caso real demonstrou como uma falha simples de configura√ß√£o
                        permitiu que um atacante tomasse controle total de contas e vazasse milhares de dados pessoais
                        (PII).</p>
                </div>
            </section>

            <section>
                <h2>O Cen√°rio de Horror</h2>
                <p>A vulnerabilidade foi de uma simplicidade chocante: o atacante conseguiu alterar o perfil p√∫blico
                    (<code>handle</code>, <code>bio</code>, <code>full_name</code>) e a loja de <strong>qualquer
                        usu√°rio</strong> da plataforma.</p>

                <h3>Os 3 Pecados Capitais:</h3>
                <ul>
                    <li>
                        <strong>1. Views sem Controle de Acesso:</strong> Views criadas com privil√©gios elevados
                        (<code>security_invoker=false</code>) ignoram as regras de seguran√ßa do usu√°rio que faz a
                        requisi√ß√£o.
                    </li>
                    <li>
                        <strong>2. Aus√™ncia de RLS (Row Level Security):</strong> As tabelas cr√≠ticas
                        (<code>orders</code>, <code>newsletter_subscribers</code>) estavam com o RLS desativado. Sem
                        RLS, o banco trata qualquer consulta via API como "permitida para tudo".
                    </li>
                    <li>
                        <strong>3. Vazamento de Metadados:</strong> O esquema completo do banco estava exposto via
                        OpenAPI, permitindo ao atacante saber exatamente onde buscar: `GET /rest/v1/orders`.
                    </li>
                </ul>
            </section>

            <section>
                <h2>üö© O Fim da Falsa Sensa√ß√£o de Seguran√ßa</h2>
                <p>Muitos devs frontend acreditam que o Supabase lida com a seguran√ßa automaticamente. Errado. O
                    Supabase √© um <strong>PostgreSQL exposto via API</strong>. As regras de seguran√ßa do banco s√£o
                    responsabilidade <strong>sua</strong>.</p>
            </section>

            <section>
                <h2>‚úÖ A Solu√ß√£o de 15 Minutos</h2>
                <p>Se voc√™ tem um projeto Supabase em produ√ß√£o, <strong>pare tudo e verifique estes pontos</strong>:</p>

                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>A√ß√£o</th>
                            <th>SQL Necess√°rio</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Ative o Security Invoker</td>
                            <td><code>ALTER VIEW nome_da_view ENABLE SECURITY INVOKER;</code></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Bloqueie Escrita em Views</td>
                            <td><code>REVOKE INSERT, UPDATE ON nome_view FROM anon;</code></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Ative o RLS</td>
                            <td><code>ALTER TABLE orders ENABLE ROW LEVEL SECURITY;</code></td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>Crie Pol√≠ticas Estritas</td>
                            <td><code>CREATE POLICY "own_orders" ON orders FOR ALL USING (auth.uid() = user_id);</code>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h3>Exemplo de Pol√≠tica Segura (RLS)</h3>
                <pre><code>-- Apenas o usu√°rio que est√° logado pode ver seus pr√≥prios pedidos.
CREATE POLICY "own_orders" 
ON orders 
FOR ALL 
USING (auth.uid() = user_id);</code></pre>

                <div class="highlight-box success">
                    <strong>Conclus√£o:</strong> A seguran√ßa √© um contrato compartilhado. O Supabase oferece a
                    infraestrutura, mas voc√™ deve configurar as regras. N√£o deixe que a conveni√™ncia se torne sua maior
                    vulnerabilidade.
                </div>
            </section>

            <section>
                <h2>ü§ñ Um Aviso para Desenvolvedores "AI-Native"</h2>
                <p>Se voc√™ est√° usando ferramentas de IA como <strong>Github Copilot, Cursor ou ChatGPT</strong> para
                    gerar suas migra√ß√µes SQL no Supabase, preste aten√ß√£o redobrada.</p>

                <p>A Intelig√™ncia Artificial √© treinada em vastos reposit√≥rios de c√≥digo open-source. O problema? Uma
                    parte significativa desses tutoriais e exemplos antigos <strong>n√£o utiliza as melhores pr√°ticas de
                        seguran√ßa</strong> por padr√£o.</p>

                <div class="highlight-box warning">
                    <strong>A Armadilha da IA:</strong> Ao pedir para gerar uma View, a IA frequentemente sugere:
                    <br><br>
                    <code>CREATE VIEW public_profiles AS SELECT * FROM profiles;</code>
                    <br><br>
                    <strong>O que ela esqueceu?</strong> A cl√°usula <code>WITH (security_invoker=true)</code>.
                </div>

                <p>Sem essa linha cr√≠tica, a View √© criada com os privil√©gios do "Definidor" (voc√™, o admin), ignorando
                    completamente as pol√≠ticas RLS que voc√™ configurou com tanto cuidado na tabela <code>profiles</code>
                    subjacente. Isso significa que qualquer usu√°rio an√¥nimo consultando essa View ver√° <strong>todos os
                        dados</strong>, independentemente das suas regras de <code>auth.uid()</code>.</p>

                <h3>A Cadeia de Explora√ß√£o (Como voc√™ ser√° hackeado)</h3>
                <ol style="color:var(--text-muted); padding-left:20px; margin-bottom:20px;">
                    <li style="margin-bottom:15px;"><strong>O Reconhecimento:</strong> O atacante inspeciona seu arquivo
                        `types.ts` vazado ou usa a API de Introspec√ß√£o do Supabase para listar Views. Ele encontra
                        `public_users`.</li>
                    <li style="margin-bottom:15px;"><strong>O Teste:</strong> Ele envia um `GET /rest/v1/public_users`
                        autenticado apenas com a chave `anon`.</li>
                    <li style="margin-bottom:15px;"><strong>A Falha:</strong> O Postgres executa a query como o "Dono da
                        View" (postgres/admin), ignora o RLS da tabela `users`, e retorna o banco inteiro.</li>
                    <li><strong>O Impacto:</strong> Vazamento massivo de PII e potencial ATO.</li>
                </ol>

                <p>N√£o confie cegamente no output da IA. Trate o c√≥digo gerado como um estagi√°rio j√∫nior: reviste linha
                    por linha, especialmente quando se trata de ACLs (Access Control Lists) e RLS.</p>

                <hr style="border-color:var(--border-dim); margin-top:40px; margin-bottom:40px;">

                <div style="text-align:center;">
                    <p style="font-size:1.1rem; margin-bottom:20px;">Quer entender mais sobre como o cen√°rio de
                        seguran√ßa cibern√©tica est√° mudando com a IA?</p>
                    <a href="cyber-intelligence-report-2025.html" class="btn btn-run"
                        style="text-decoration:none; display:inline-block; font-size:1rem; padding:15px 30px;">
                        LER RELAT√ìRIO DE INTELIG√äNCIA 2025 >>
                    </a>
                </div>
            </section>

        </article>

        <footer>
            <div
                style="margin-top: 50px; border-top: 1px solid var(--border-dim); padding-top: 20px; text-align: center; color: var(--text-muted); font-size: 0.8rem;">
                <p>RedRecon Blog ¬© 2025</p>
            </div>
        </footer>

    </div>

</body>

</html>